<class
    name = "zccp_msg"
    title = "ZeroMQ Command & Control Protocol"
    header = "."
    include = "czmq.h"
    script = "zproto_codec_c"
    signature = "10"
    >
    <grammar>
    ZCCP = greeting traffic
    
    greeting = C:hello S:ready
    traffic = C:subscribe / C:publish / S:deliver
            / request / reply
    </grammar>
    
    <message name = "hello">
        Client says hello to server and provides its identifier.
        <field name = "identifier" type = "string">Client identifier</field>
    </message>

    <message name = "ready">
        Server accepts client
    </message>

    <message name = "subscribe">
        Client subscribes to some set of notifications
        <field name = "expression" type = "string">Regular expression</field>
    </message>

    <message name = "publish">
        Client publishes a notification 
        <field name = "header" type = "string">Header, for matching</field>
        <field name = "content" type = "chunk">Content</field>
    </message>

    <message name = "deliver">
        Server delivers notification to client
        <field name = "origin" type = "string">A client identifier</field>
        <field name = "header" type = "string">Header</field>
        <field name = "content" type = "chunk">Content</field>
    </message>

    <message name = "request">
        Request some action
        <field name = "method" type = "string">Requested method</field>
        <field name = "content" type = "chunk">Content</field>
    </message>

    <message name = "reply">
        Reply to a command request
        <field name = "status" type = "number" size = "2">Success/failure status</field>
        <field name = "content" type = "chunk">Content</field>
    </message>
    
    <message name = "invalid">
        Client sent a message that was not valid at this time
    </message>
</class>
